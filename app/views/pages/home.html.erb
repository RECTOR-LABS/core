<div class="container-homepage">

  <!-- NFT Profile Picture -->
  <%= image_tag "rector_profile_image.png", alt: "RECTOR", class: "profile-picture" %>

  <!-- Introduction Section -->
  <div class="intro-section">
    <h1 class="intro-greeting">Assalamu'alaikum! I'm RECTOR.</h1>
    <p class="intro-tagline">
      Full-stack builder
      <% if @contributions[:current_streak].to_i > 0 %>
        on a <strong><%= @contributions[:current_streak] %>-day streak</strong>.
      <% else %>
        building for eternity.
      <% end %>
      <% if @currently_building %>
        Currently shipping <strong><%= link_to @currently_building.name, @currently_building.html_url, target: "_blank", rel: "noopener" %></strong>
        (<%= @currently_building.detailed_time_ago %>).
      <% end %>
      <strong><%= number_with_delimiter(@contributions[:total]) %></strong> contributions this year
      across <strong><%= @aggregate_stats[:total_repos] %></strong> repositories.
    </p>
  </div>

  <!-- Quick Nav -->
  <div class="quick-nav">
    Explore:
    <%= link_to "work", works_path %> ‚Ä¢
    <%= link_to "labs", "#" %> ‚Ä¢
    <%= link_to "journal", "#" %> ‚Ä¢
    <%= link_to "cheatsheet", "#" %>
  </div>

  <!-- Section Divider -->
  <hr class="section-divider" />

  <!-- Achievements Section -->
  <section>
    <h2>Achievements</h2>
    <p class="mt-4 mb-6 text-[#3B2C22]/70">
      4 wins across bounties and hackathons in 2024-2025.
    </p>

    <div class="space-y-4">
      <!-- Web3 Deal Discovery - 1st Place -->
      <div class="achievement-card">
        <div class="flex justify-between items-start">
          <div>
            <span class="achievement-badge achievement-gold">ü•á 1st Place</span>
            <h3 class="achievement-title">
              <%= link_to "Web3 Deal Discovery", "https://github.com/RECTOR-LABS/web3-deal-discovery-nft-coupons", target: "_blank", rel: "noopener" %>
            </h3>
            <p class="achievement-event">MonkeDAO Cypherpunk ‚Ä¢ Superteam Earn</p>
          </div>
          <span class="achievement-prize">$5,000 + NFT</span>
        </div>
        <p class="achievement-desc">NFT coupons on Solana ‚Äî "Groupon meets DeFi" with escrow-based resale marketplace.</p>
      </div>

      <!-- SIP Protocol - Winner -->
      <div class="achievement-card">
        <div class="flex justify-between items-start">
          <div>
            <span class="achievement-badge achievement-gold">üèÜ Winner</span>
            <h3 class="achievement-title">
              <%= link_to "SIP Protocol", "https://github.com/sip-protocol/sip-protocol", target: "_blank", rel: "noopener" %>
            </h3>
            <p class="achievement-event">Zypherpunk Hackathon ‚Ä¢ 3 Tracks</p>
          </div>
          <span class="achievement-prize">$6,500</span>
        </div>
        <p class="achievement-desc">Privacy layer for cross-chain transactions via NEAR Intents + Zcash. Stealth addresses & ZK proofs.</p>
      </div>

      <!-- OpenBudget.ID - 2nd Place -->
      <div class="achievement-card">
        <div class="flex justify-between items-start">
          <div>
            <span class="achievement-badge achievement-silver">ü•à 2nd Place</span>
            <h3 class="achievement-title">
              <%= link_to "OpenBudget.ID", "https://github.com/RECTOR-LABS/openbudget-id", target: "_blank", rel: "noopener" %>
            </h3>
            <p class="achievement-event">Garuda Spark ‚Ä¢ Superteam Indonesia</p>
          </div>
          <span class="achievement-prize">$1,500</span>
        </div>
        <p class="achievement-desc">Government spending transparency on Solana. Ministries publish on-chain, citizens verify.</p>
      </div>

      <!-- Saros SDK Docs - 1st Place Bounty -->
      <div class="achievement-card">
        <div class="flex justify-between items-start">
          <div>
            <span class="achievement-badge achievement-bounty">üìö 1st Place</span>
            <h3 class="achievement-title">
              <%= link_to "Saros SDK Docs", "https://github.com/rz1989s/saros-docs", target: "_blank", rel: "noopener" %>
            </h3>
            <p class="achievement-event">Saros SDK Guide Challenge ‚Ä¢ Bounty</p>
          </div>
          <span class="achievement-prize">$300</span>
        </div>
        <p class="achievement-desc">Comprehensive Docusaurus documentation for Saros Finance SDKs with interactive API Explorer.</p>
      </div>
    </div>

    <!-- Total Summary -->
    <div class="mt-6 p-4 bg-[#F9C846]/10 border-l-4 border-[#F9C846] rounded">
      <p class="font-mono text-sm font-semibold text-[#3B2C22]">
        Total Earned: ~$10,800 USDC + Gen3 Monke NFT
      </p>
    </div>
  </section>

  <!-- Section Divider -->
  <hr class="section-divider" />

  <!-- Building in Public Section -->
  <section>
    <h2>Building in Public</h2>

    <!-- GitHub Contribution Graph with Year Tabs -->
    <%= render "pages/contribution_graph",
        contributions: @contributions,
        selected_year: @selected_year,
        available_years: @available_years %>

    <!-- Compact Activity Bar -->
    <% if @currently_building && @aggregate_stats %>
      <div class="activity-bar">
        <% if @currently_building.recently_active? %>
          <span class="live-pulse"></span>
        <% else %>
          <span class="idle-pulse"></span>
        <% end %>
        <span class="activity-text">
          <%= link_to @currently_building.name, @currently_building.html_url, target: "_blank", rel: "noopener", class: "activity-link" %>
          <span class="activity-separator">‚Ä¢</span>
          <%= @currently_building.language %>
          <span class="activity-separator">‚Ä¢</span>
          ‚≠ê <%= number_to_human(@aggregate_stats[:total_stars], precision: 1, significant: false, format: '%n%u', units: { thousand: 'k' }) %>
          <span class="activity-separator">‚Ä¢</span>
          ‚äô <%= number_to_human(@aggregate_stats[:total_commits], precision: 1, significant: false, format: '%n%u', units: { thousand: 'k' }) %>
          <span class="activity-separator">‚Ä¢</span>
          üì¶ <%= @aggregate_stats[:total_repos] %>
          <span class="activity-separator">‚Ä¢</span>
          <span class="activity-time"><%= @currently_building.detailed_time_ago %></span>
        </span>
      </div>
    <% end %>

    <% if @syncing %>
      <p class="mt-6">Loading latest projects from GitHub...</p>
    <% elsif @latest_projects.any? %>
      <div class="mt-6 space-y-3">
        <% @latest_projects.each do |project| %>
          <div class="project-card">
            <div class="flex items-start justify-between gap-2">
              <div class="flex-1 min-w-0">
                <p class="mb-0 font-semibold truncate">
                  <%= link_to project.name, project.html_url, target: "_blank", rel: "noopener" %>
                  <% # Check if this is a hackathon/bounty winner %>
                  <% winner_projects = {
                    'web3-deal-discovery-nft-coupons' => 'ü•á',
                    'sip-protocol' => 'üèÜ',
                    'openbudget-id' => 'ü•à',
                    'saros-docs' => 'ü•á'
                  } %>
                  <% if winner_projects[project.name] %>
                    <span class="project-winner-badge ml-1"><%= winner_projects[project.name] %> Winner</span>
                  <% end %>
                </p>
                <% if project.description.present? %>
                  <p class="text-sm text-[#3B2C22]/70 mt-1 mb-0"><%= sanitize project.description, tags: [] %></p>
                <% end %>
              </div>
            </div>
            <div class="project-stats">
              <% if project.language.present? %>
                <span class="project-stat">
                  <span class="w-2 h-2 rounded-full bg-sky-blue"></span>
                  <%= project.language %>
                </span>
              <% end %>
              <% if project.stargazers_count.to_i > 0 %>
                <span class="project-stat">
                  <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"/>
                  </svg>
                  <%= project.stargazers_count %>
                </span>
              <% end %>
              <% if project.forks_count.to_i > 0 %>
                <span class="project-stat">
                  <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z"/>
                  </svg>
                  <%= project.forks_count %>
                </span>
              <% end %>
              <% if project.commit_count.to_i > 0 %>
                <span class="project-stat">
                  <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.93 8.5a4.002 4.002 0 0 1-7.86 0H.75a.75.75 0 0 1 0-1.5h3.32a4.002 4.002 0 0 1 7.86 0h3.32a.75.75 0 0 1 0 1.5Zm-1.43-.75a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"/>
                  </svg>
                  <%= project.commit_count %>
                </span>
              <% end %>
              <% if project.latest_commit_sha.present? %>
                <span class="project-stat font-mono text-[10px] text-[#3B2C22]/50">
                  <%= project.latest_commit_sha %>
                </span>
              <% end %>
              <span class="project-stat ml-auto">
                <%= project.time_ago %>
              </span>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="mt-6">No projects found. Check back later!</p>
    <% end %>

    <% if @tech_stack && @tech_stack[:primary].present? %>
      <div class="mt-6 p-4 bg-[#3B2C22]/5 border-l-4 border-[#41CFFF] rounded">
        <p class="text-sm font-medium text-[#3B2C22]/60 mb-1">
          BUILDING ACROSS <%= @tech_stack[:total_repos] %> REPOSITORIES
        </p>
        <p class="font-mono text-base font-semibold text-[#3B2C22] mb-0">
          <%= @tech_stack[:primary].map { |l| l[:name] }.join(" ‚Ä¢ ") %>
        </p>
      </div>
    <% end %>
  </section>

  <!-- Divider -->
  <hr class="section-divider" />

  <!-- Writing Section -->
  <section>
    <h2>Writing</h2>
    <p class="mt-4 mb-2">
      <strong>Latest article:</strong>
      <%= link_to "Coming Soon", "#" %>
    </p>
    <p>
      Journal section powered by Ghost CMS, integrated via API.
      Articles about code, faith, and building for eternity.
    </p>
  </section>

  <!-- Divider -->
  <hr class="section-divider" />

  <!-- Get in Touch -->
  <section>
    <h2>Get in Touch</h2>
    <p class="mt-4">
      <%= link_to "GitHub", "https://github.com/rz1989s", target: "_blank", rel: "noopener" %> ‚Ä¢
      <%= link_to "X", "https://x.com/RZ1989sol", target: "_blank", rel: "noopener" %> ‚Ä¢
      <%= link_to "Email", "mailto:rheza10@gmail.com" %>
    </p>
  </section>

</div>
